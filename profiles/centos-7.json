
{
  "builders": [
    {
      "type":                  "vsphere-iso",

      "vcenter_server":        "{{user `vcenter_Vcenter`}}",
      "datacenter":            "{{user `vcenter_Datacenter`}}",
      "cluster":               "{{user `vcenter_Cluster`}}",
      "host":                  "{{user `vcenter_Host`}}",
      "datastore":             "{{user `vcenter_Datastore`}}",
      "folder":                "{{user `vcenter_Folder`}}",
      "username":              "{{user `vcenter_User`}}",
      "password":              "{{user `vcenter_Pass`}}",
      "insecure_connection":   "true",
 
      "vm_name":               "{{user `vm_Name`}}",
      "CPUs":                  "{{user `vm_CPU`}}",
      "cpu_cores":             "{{user `vm_CPU`}}",
      "RAM":                   "{{user `vm_RAM`}}",
      "disk_size":             "{{user `vm_Disk`}}",
      "guest_os_type":         "{{user `vm_OStype`}}",
      "network":               "{{user `vm_Vlan`}}",
      "notes":                 "{{user `vm_Notes`}}",

      "ssh_agent_auth":        "true", 
      "ssh_private_key_file":  "sshkeys/packer_key", 
      "ssh_username":          "root",
      "disk_controller_type":  "pvscsi",
      "disk_thin_provisioned": "true",
      "firmware":              "bios",
      "network_card":          "vmxnet3",
      "iso_paths":             ["[Datastore] PATH_TO_ISO"],
      "iso_checksum":          "ISO_CHECKSUM",
      "iso_checksum_type":     "sha256",      
      "boot_command": [
          "<esc><wait>",
          "linux inst.ks=http://__KICKSTART",
          "<enter>"
      ]
    }
  ],

  "provisioners": [

    {
      "type": "shell",
      "inline": "hostnamectl set-hostname {{user `vm_Name`}}"
    },

    {
      "type": "shell",
      "scripts": "scripts/conf_zabbix.sh"
    }

  ],

  "post-processors": [

  ]
}
